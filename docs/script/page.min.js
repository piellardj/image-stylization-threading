var Page;!function(e){var e=e.Demopage||(e.Demopage={}),r="error-messages",t=document.getElementById(r);if(!t)throw new Error("Cannot find element '"+r+"'.");function a(e){return t?t.querySelector("span[id=error-message-"+e+"]"):null}e.setErrorMessage=function(e,r){var n;t&&((n=a(e))?n.innerHTML=r:((n=document.createElement("span")).id="error-message-"+e,n.innerText=r,t.appendChild(n),t.appendChild(document.createElement("br"))))},e.removeErrorMessage=function(e){var r;t&&(e=a(e))&&((r=e.nextElementSibling)&&t.removeChild(r),t.removeChild(e))}}(Page=Page||{});
var Page;!function(n){var e,t,i,a;function s(e){this.queryParameters={};var t=e.indexOf(s.queryDelimiter);if(t<0)this.baseUrl=e;else{this.baseUrl=e.substring(0,t);for(var r=0,n=e.substring(t+s.queryDelimiter.length).split(s.parameterDelimiter);r<n.length;r++){var i,a=n[r],o=a.split(s.keyValueDelimiter);2===o.length?(i=decodeURIComponent(o[0]),o=decodeURIComponent(o[1]),this.queryParameters[i]=o):console.log("Unable to parse query string parameter '"+a+"'.")}}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join(":")+":"}function l(e){window.history.replaceState("","",e)}function r(e,t){this.objectsName=e,this.loadObjectsFunction=t,this.cacheObject=null}function c(e,t,r){this.prefix=e,this.serialize=t,this.tryDeserialize=r}e=n.Helpers||(n.Helpers={}),(t=e.Utils||(e.Utils={})).selectorAll=function(e,t){for(var r=e.querySelectorAll(t),n=[],i=0;i<r.length;i++)n.push(r[i]);return n},t.selector=function(e,t){if(e=e.querySelector(t))return e;throw new Error("No element matching '".concat(t,"'."))},t.touchArray=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},t.findFirst=function(e,t){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1},t=e.URL||(e.URL={}),i="page",s.prototype.setQueryParameter=function(e,t){null===t?delete this.queryParameters[e]:this.queryParameters[e]=t},s.prototype.loopOnParameters=function(e,t){for(var r=0,n=Object.keys(this.queryParameters);r<n.length;r++){var i,a=n[r];0===a.indexOf(e)&&a.length>e.length&&(i=this.queryParameters[a],t(a.substring(e.length),i))}},s.prototype.buildUrl=function(){for(var e=[],t=0,r=Object.keys(this.queryParameters);t<r.length;t++){var n=r[t],i=this.queryParameters[n],n=encodeURIComponent(n),i=encodeURIComponent(i);e.push(n+s.keyValueDelimiter+i)}var a=e.join(s.parameterDelimiter);return a?this.baseUrl+s.queryDelimiter+a:this.baseUrl},s.queryDelimiter="?",s.parameterDelimiter="&",s.keyValueDelimiter="=",a=s,t.loopOnParameters=function(e,t){var r=new a(window.location.href),e=o(i,e);r.loopOnParameters(e,t)},t.setQueryParameter=function(e,t,r){var n=new a(window.location.href),e=o(i,e);n.setQueryParameter(e+t,r),l(n.buildUrl())},t.removeQueryParameter=function(e,t){var r=new a(window.location.href),e=o(i,e);r.setQueryParameter(e+t,null),l(r.buildUrl())},(e.Events||(e.Events={})).callAfterDOMLoaded=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},r.prototype.getById=function(e){var t=this.safeCacheObject[e];if(t)return t;throw new Error("Invalid '".concat(this.objectsName,"' cache object id '").concat(e,"'."))},r.prototype.getByIdSafe=function(e){return this.safeCacheObject[e]||null},r.prototype.load=function(){this.cacheObject||(this.cacheObject=this.loadCacheObject())},Object.defineProperty(r.prototype,"safeCacheObject",{get:function(){return this.cacheObject||this.load(),this.cacheObject},enumerable:!1,configurable:!0}),r.prototype.loadCacheObject=function(){for(var e={},t=0,r=this.loadObjectsFunction();t<r.length;t++){var n=r[t];if(void 0!==e[n.id])throw new Error("Object '".concat(n.id,"' is already in cache."));e[n.id]=n}return e},e.Cache=r,c.prototype.storeState=function(e){var t=this.serialize(e);n.Helpers.URL.setQueryParameter(this.prefix,e.id,t)},c.prototype.clearStoredState=function(e){n.Helpers.URL.removeQueryParameter(this.prefix,e.id)},c.prototype.applyStoredState=function(){var r=this;n.Helpers.URL.loopOnParameters(this.prefix,function(e,t){r.tryDeserialize(e,t)||(console.log("Removing invalid query parameter '"+e+"="+t+"'."),n.Helpers.URL.removeQueryParameter(r.prefix,e))})},e.Storage=c}(Page=Page||{});
var Page;!function(e){(e.Controls||(e.Controls={})).setVisibility=function(e,n){var t;e="div#control-"+e,(t=document.querySelector(e))||console.error("Cannot find control '"+e+"'."),t&&(t.style.display=n?"":"none")}}(Page=Page||{}),function(d){(d.Sections||(d.Sections={})).setVisibility=function(e,n){if(e="section#section-"+e,(t=document.querySelector(e))||console.error("Cannot find section '"+e+"'."),(e=t)&&e.parentElement){e.style.display=n?"":"none";var t=e.parentElement;function o(e){return"hr"===e.tagName.toLowerCase()}function r(e){return"none"!==e.style.display}for(var i=d.Helpers.Utils.selectorAll(t,"section, hr"),l=!1,s=0,a=i;s<a.length;s++)o(y=a[s])?(y.style.display=l?"none":"",l=!0):r(y)&&(l=!1);for(var c=0,f=i;c<f.length;c++)if(o(y=f[c]))y.style.display="none";else if(r(y))break;for(var y,u=i.length-1;0<=u;u--)if(o(y=i[u]))y.style.display="none";else if(r(y))break}}}(Page=Page||{});
var Page;!function(t){var e,n,l,i,r;function a(e){var i=this;this.observers=[],this.inputElement=t.Helpers.Utils.selector(e,"input"),this.labelSpanElement=t.Helpers.Utils.selector(e,"label > span"),this.id=this.inputElement.id,this.inputElement.addEventListener("change",function(e){e.stopPropagation();var t=i.inputElement.files;if(t&&1===t.length){i.labelSpanElement.innerText=a.truncate(t[0].name);for(var n=0,l=i.observers;n<l.length;n++)(0,l[n])(t)}},!1)}e=t.FileControl||(t.FileControl={}),a.prototype.clear=function(){this.inputElement.value="",this.labelSpanElement.innerText=this.labelSpanElement.dataset.placeholder||"Upload"},a.truncate=function(e){return e.length>a.filenameMaxSize?e.substring(0,a.filenameMaxSize-1)+"..."+e.substring(e.length-(a.filenameMaxSize-1)):e},a.filenameMaxSize=16,n=a,l=function(e){var l=this;this.observers=[],this.buttonElement=t.Helpers.Utils.selector(e,"input"),this.id=this.buttonElement.id,this.buttonElement.addEventListener("click",function(e){e.stopPropagation();for(var t=0,n=l.observers;t<n.length;t++)(0,n[t])()},!1)},i=new t.Helpers.Cache("FileUpload",function(){return t.Helpers.Utils.selectorAll(document,".file-control.upload > input[id]").map(function(e){e=e.parentElement;return new n(e)})}),r=new t.Helpers.Cache("FileDownload",function(){return t.Helpers.Utils.selectorAll(document,".file-control.download > input[id]").map(function(e){e=e.parentElement;return new l(e)})}),t.Helpers.Events.callAfterDOMLoaded(function(){i.load(),i.load()}),e.addDownloadObserver=function(e,t){r.getById(e).observers.push(t)},e.addUploadObserver=function(e,t){i.getById(e).observers.push(t)},e.clearFileUpload=function(e){i.getById(e).clear()}}(Page=Page||{});
var Page;!function(a){var e,t,n,l;function o(e){var t=this;this.observers=[],this.id=o.computeShortId(e.id),this.inputElements=[];for(var r=0,n=a.Helpers.Utils.selectorAll(e,"input");r<n.length;r++){var s=n[r];this.inputElements.push(s),s.addEventListener("change",function(e){e.stopPropagation(),t.reloadValues(),l.storeState(t),t.callObservers()},!1)}this.reloadValues()}e=a.Tabs||(a.Tabs={}),o.computeShortId=function(e){if(e.lastIndexOf(o.ID_SUFFIX)!=e.length-o.ID_SUFFIX.length)throw new Error("Invalid tabs container id: '"+e+"'.");return e.substring(0,e.length-o.ID_SUFFIX.length)},Object.defineProperty(o.prototype,"values",{get:function(){return this._values},set:function(e){for(var t=0,r=this.inputElements;t<r.length;t++){for(var n=r[t],s=!1,a=0,l=e;a<l.length;a++){var o=l[a];if(n.value===o){s=!0;break}}n.checked=s}this.reloadValues()},enumerable:!1,configurable:!0}),o.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this._values)},o.prototype.reloadValues=function(){for(var e=[],t=0,r=this.inputElements;t<r.length;t++){var n=r[t];n.checked&&e.push(n.value)}this._values=e},o.ID_SUFFIX="-id",t=o,n=new a.Helpers.Cache("Tabs",function(){return a.Helpers.Utils.selectorAll(document,"div.tabs[id]").map(function(e){return new t(e)})}),l=new a.Helpers.Storage("tabs",function(e){return e.values.join(";")},function(e,t){t=t.split(";"),e=n.getByIdSafe(e);return!!e&&(e.values=t,e.callObservers(),!0)}),a.Helpers.Events.callAfterDOMLoaded(function(){n.load(),l.applyStoredState()}),e.addObserver=function(e,t){n.getById(e).observers.push(t)},e.getValues=function(e){return n.getById(e).values},e.setValues=function(e,t,r){void 0===r&&(r=!1),(e=n.getById(e)).values=t,r&&l.storeState(e)},e.storeState=function(e){e=n.getById(e),l.storeState(e)},e.clearStoredState=function(e){e=n.getById(e),l.clearStoredState(e)}}(Page=Page||{});
var Page;!function(r){var e,t,n,s,i;function l(e){var t=this,e=(this.onInputObservers=[],this.onChangeObservers=[],this.inputElement=r.Helpers.Utils.selector(e,"input[type='range']"),this.progressLeftElement=r.Helpers.Utils.selector(e,".range-progress-left"),this.tooltipElement=r.Helpers.Utils.selector(e,"output.range-tooltip"),this.id=this.inputElement.id,+this.inputElement.min),n=+this.inputElement.max,i=+this.inputElement.step;this.nbDecimalsToDisplay=l.getMaxNbDecimals(e,n,i),this.inputElement.addEventListener("input",function(e){e.stopPropagation(),t.reloadValue(),t.callSpecificObservers(t.onInputObservers)}),this.inputElement.addEventListener("change",function(e){e.stopPropagation(),t.reloadValue(),s.storeState(t),t.callSpecificObservers(t.onChangeObservers)}),this.reloadValue()}e=r.Range||(r.Range={}),Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(e){this.inputElement.value=""+e,this.reloadValue()},enumerable:!1,configurable:!0}),l.prototype.callObservers=function(){this.callSpecificObservers(this.onInputObservers),this.callSpecificObservers(this.onChangeObservers)},l.prototype.callSpecificObservers=function(e){for(var t=0,n=e;t<n.length;t++)(0,n[t])(this.value)},l.prototype.updateAppearance=function(){var e=(+this.inputElement.value-+this.inputElement.min)/(+this.inputElement.max-+this.inputElement.min),e=Math.max(0,Math.min(1,e));this.progressLeftElement.style.width=100*e+"%",e=this.nbDecimalsToDisplay<0?this.inputElement.value:(+this.inputElement.value).toFixed(this.nbDecimalsToDisplay),this.tooltipElement.textContent=e},l.prototype.reloadValue=function(){this._value=+this.inputElement.value,this.updateAppearance()},l.getMaxNbDecimals=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=-1,i=0,r=e;i<r.length;i++){var s=r[i],a=l.nbDecimals(s);if(s<0)return-1;n<a&&(n=a)}return n},l.nbDecimals=function(e){e=e.toString();return/^[0-9]+$/.test(e)?0:/^[0-9]+\.[0-9]+$/.test(e)?e.length-(e.indexOf(".")+1):-1},t=l,n=new r.Helpers.Cache("Range",function(){return r.Helpers.Utils.selectorAll(document,".range-container > input[type='range']").map(function(e){e=e.parentElement;return new t(e)})}),s=new r.Helpers.Storage("range",function(e){return""+e.value},function(e,t){e=n.getByIdSafe(e);return!!e&&(e.value=+t,e.callObservers(),!0)}),r.Helpers.Events.callAfterDOMLoaded(function(){n.load(),s.applyStoredState()}),i=!!window.MSInputMethodContext&&!!document.documentMode,e.addObserver=function(e,t){e=n.getById(e),(i?e.onChangeObservers:e.onInputObservers).push(t)},e.addLazyObserver=function(e,t){n.getById(e).onChangeObservers.push(t)},e.getValue=function(e){return n.getById(e).value},e.setValue=function(e,t){n.getById(e).value=t},e.storeState=function(e){e=n.getById(e),s.storeState(e)},e.clearStoredState=function(e){e=n.getById(e),s.clearStoredState(e)}}(Page=Page||{});
var Page;!function(e){var t,r,c,n;function o(e){var t=this;this.observers=[],this.id=e.id,this.element=e,this.reloadValue(),this.element.addEventListener("change",function(){t.reloadValue(),n.storeState(t),t.callObservers()})}t=e.Checkbox||(e.Checkbox={}),Object.defineProperty(o.prototype,"checked",{get:function(){return this._checked},set:function(e){this.element.checked=e,this.reloadValue()},enumerable:!1,configurable:!0}),o.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this.checked)},o.prototype.reloadValue=function(){this._checked=this.element.checked},r=o,c=new e.Helpers.Cache("Checkbox",function(){return e.Helpers.Utils.selectorAll(document,"div.checkbox > input[type=checkbox][id]").map(function(e){return new r(e)})}),n=new e.Helpers.Storage("checkbox",function(e){return e.checked?"true":"false"},function(e,t){e=c.getByIdSafe(e);return!(!e||"true"!==t&&"false"!==t||(e.checked="true"===t,e.callObservers(),0))}),e.Helpers.Events.callAfterDOMLoaded(function(){c.load(),n.applyStoredState()}),t.addObserver=function(e,t){c.getById(e).observers.push(t)},t.setChecked=function(e,t){c.getById(e).checked=t},t.isChecked=function(e){return c.getById(e).checked},t.storeState=function(e){e=c.getById(e),n.storeState(e)},t.clearStoredState=function(e){e=c.getById(e),n.clearStoredState(e)}}(Page=Page||{});

var Page;!function(h){var n,o,i,T,r,t,c,a,s,u,l,v,d,f,g,p,m,y,E,w,e,L,k,M,C,H,U,b,Y,x,S,X,z,A,D;function O(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function q(e){return h.Helpers.Utils.selector(document,"input[type=checkbox][id="+e+"]")}function B(e){document.body.style.overflow=e?"hidden":"auto"}function P(){var e=i.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}function F(e){return e+"px"}function R(){o.style.width="100vw";var e=P();if(r.checked?(o.style.height="100%",o.style.maxWidth="",o.style.maxHeight=""):(e[1]=e[0]*s/a,o.style.height=F(e[1]),o.style.maxWidth=F(a),o.style.maxHeight=F(s)),e[0]!==u[0]||e[1]!==u[1]){u=P();for(var n=0,t=l;n<t.length;n++)(0,t[n])(u[0],u[1])}}function I(e,n){var t=i.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function Q(e,n){d[0]=e,d[1]=n}function W(e,n){e=I(e,n);Q(e[0],e[1]),g=!0;for(var t=0,o=Y;t<o.length;t++)(0,o[t])()}function V(){if(g){g=!1;for(var e=0,n=x;e<n.length;e++)(0,n[e])()}}function j(e,n){var t=I(f[0]=e,f[1]=n),o=t[0]-d[0],i=t[1]-d[1];if(d[0]=t[0],d[1]=t[1],g)for(var r=0,c=S;r<c.length;r++)(0,c[r])(o,i);for(var a=0,s=X;a<s.length;a++)(0,s[a])(t[0],t[1])}function G(e,n){var t=e.clientX-n.clientX,e=e.clientY-n.clientY;return Math.sqrt(t*t+e*e)}function J(e,n){h.Helpers.URL.setQueryParameter(k,e,n?H:U)}n=h.Canvas||(h.Canvas={}),o=h.Helpers.Utils.selector(document,"#canvas-container"),i=h.Helpers.Utils.selector(document,"canvas[id=canvas]"),T=h.Helpers.Utils.selector(document,"#canvas-buttons-column"),r=q("fullscreen-checkbox-id"),t=q("side-pane-checkbox-id"),c=h.Helpers.Utils.selector(o,".loader"),s=a=512,r&&(h.Helpers.Events.callAfterDOMLoaded(function(){B(r.checked),r.addEventListener("change",function(){B(r.checked)})}),t)&&r.addEventListener("change",function(){r.checked&&(t.checked=!1)},!1),u=[0,0],l=[],h.Helpers.Events.callAfterDOMLoaded(R),r.addEventListener("change",R,!1),window.addEventListener("resize",R,!1),b=[R],Y=[],x=[],S=[],X=[],z=[],A=[],D=[],r&&r.addEventListener("change",function(){for(var e=r.checked,n=0,t=b;n<t.length;n++)(0,t[n])(e)},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&n.toggleFullscreen(!1)}),L=v=v||{},d=[0,0],g=!(f=[0,0]),L.getMousePosition=function(){return[d[0],d[1]]},L.setMousePosition=Q,L.isMouseDown=function(){return g},L.mouseDown=W,L.mouseUp=V,L.mouseMove=j,i&&(i.addEventListener("mousedown",function(e){0===e.button&&W(e.clientX,e.clientY)},!1),i.addEventListener("mouseenter",function(){for(var e=0,n=z;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("mouseleave",function(){for(var e=0,n=A;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("wheel",function(e){if(0<D.length){for(var n=0<e.deltaY?1:-1,t=0,o=D;t<o.length;t++)(0,o[t])(n,d);return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){j(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&V()}),l.push(function(){j(f[0],f[1])})),p=[],m=0,i&&(i.addEventListener("touchstart",function(e){for(var n=0===p.length,t=0,o=h.Helpers.Utils.touchArray(e.changedTouches);t<o.length;t++){for(var i=o[t],r=!1,c=0,a=p;c<a.length;c++){var s=a[c];if(i.identifier===s.id){r=!0;break}}r||p.push({id:i.identifier,clientX:i.clientX,clientY:i.clientY})}n&&0<p.length?(e=p[0],v.mouseDown(e.clientX,e.clientY)):2===p.length&&(m=G(p[0],p[1]))},!1),window.addEventListener("touchend",function(e){for(var n=0<p.length,t=0,o=h.Helpers.Utils.touchArray(e.changedTouches);t<o.length;t++)for(var i=o[t],r=0;r<p.length;++r)i.identifier===p[r].id&&(p.splice(r,1),r--);1===p.length?(e=I((e=p[0]).clientX,e.clientY),v.setMousePosition(e[0],e[1])):n&&0===p.length&&v.mouseUp()}),window.addEventListener("touchmove",function(e){for(var n=0,t=h.Helpers.Utils.touchArray(e.changedTouches);n<t.length;n++)for(var o=t[n],i=0,r=p;i<r.length;i++){var c=r[i];o.identifier===c.id&&(c.clientX=o.clientX,c.clientY=o.clientY)}var a=X.length+S.length;if(v.isMouseDown()&&0<a&&e.preventDefault(),1===p.length){var s=p[0];v.mouseMove(s.clientX,s.clientY)}else if(2===p.length){var s=p[0],a=p[1],e=G(s,a),u=(m-e)/m;m=e;for(var l=I(.5*(s.clientX+a.clientX),.5*(s.clientY+a.clientY)),d=0,f=D;d<f.length;d++)(0,f[d])(5*u,l)}},{passive:!1})),L=y=y||{},E={},w="-indicator-id",L.getIndicator=function(e){var n=O("#"+e+w);if(n)return n;throw new Error("Could not find indicator '".concat(e,"'."))},L.getIndicatorSpan=function(e){if(!E[e]){var n=O("#"+(e+w)+" span");if(!n)throw new Error("Could not find indicator span '".concat(e,"'."));E[e]=n}return E[e]},L=e=e||{},k="canvas",M="fullscreen",C="sidepane",H="true",U="false",L.attachStorageEvents=function(){r&&r.addEventListener("change",function(){J(M,r.checked),h.Helpers.URL.removeQueryParameter(k,C)}),t&&t.addEventListener("change",function(){J(C,t.checked)})},L.applyStoredState=function(){h.Helpers.URL.loopOnParameters(k,function(e,n){e!==M||n!==H&&n!==U?e!==C||n!==H&&n!==U?(console.log("Removing invalid query parameter '"+e+"="+n+"'."),h.Helpers.URL.removeQueryParameter(k,e)):t&&(t.checked=n===H):r&&(r.checked=n===H)})},e.applyStoredState(),e.attachStorageEvents(),n.Observers=Object.freeze({canvasResize:l,fullscreenToggle:b,mouseDown:Y,mouseDrag:S,mouseEnter:z,mouseLeave:A,mouseMove:X,mouseWheel:D,mouseUp:x}),n.getAspectRatio=function(){var e=P();return e[0]/e[1]},n.getCanvas=function(){return i},n.getCanvasContainer=function(){return o},n.getSize=P,n.getMousePosition=function(){return v.getMousePosition()},n.isFullScreen=function(){return r&&r.checked},n.isMouseDown=function(){return v.isMouseDown()},n.setIndicatorText=function(e,n){(e=y.getIndicatorSpan(e))&&(e.innerText=n)},n.setIndicatorVisibility=function(e,n){(e=y.getIndicator(e))&&(e.style.display=n?"":"none")},n.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"":"none"},n.setMaxSize=function(e,n){a=e,s=n,R()},n.setResizable=function(e){T.style.display=e?"":"none"},n.setLoaderText=function(e){c&&(c.querySelector("span").innerText=e)},n.showLoader=function(e){c&&(c.style.display=e?"block":"")},n.toggleFullscreen=function(e){r&&e!==r.checked&&(r.checked=e,"function"==typeof window.CustomEvent?r.dispatchEvent(new CustomEvent("change")):"function"==typeof CustomEvent.prototype.initCustomEvent&&((e=document.createEvent("CustomEvent")).initCustomEvent("change",!1,!1,void 0),r.dispatchEvent(e)))}}(Page=Page||{});
Page.Canvas.setMaxSize(512,512);